pipeline{
    agent any

    stages{
        stage("clean-ws"){
            steps{
                script {
                    cleanWs()
                }
            }
        }
        stage("clone-repo"){
            steps{
                script {
                    checkout scmGit(
                            branches: [[name: 'mainline']],
                            userRemoteConfigs: [[url: 'git@github.com:PatilShubhankar/terraform-drift-detection.git',
                            credentialsId:  'git-shubhankar']])
                    sh """
                    ls -lrt
                    """
                }
            }
        }
        stage("create-plan"){
            steps{
                script {
                    sh """
                    echo terraform plan
                    """
                }
            }
        }
        stage("Trigger notification"){
            steps{
                script {
                    sh """
                    echo Slack notification
                    """
                }
            }
        }
        stage("Remove plan"){
            steps{
                script{
                    sh """echo cleaning"""
                }
            }
        }
    }
}